<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <title>Magnific Popup + History.js</title>

        <!-- jQuery -->
        <script src="libs/jquery.js"></script>

        <!-- Magnific Popup: https://github.com/dimsemenov/Magnific-Popup -->
        <script src="libs/jquery.magnific-popup.js"></script>
        <link href="css/magnific-popup.css" rel="stylesheet">        

        <!-- History.js: https://github.com/browserstate/history.js -->
        <script src="libs/jquery.history.js"></script>

        <!-- Just a regular Magnific Popup call, nothing special -->
        <script>
            $(document).ready(function() {
                $('.gallery').each(function() {
                    var $gallery = $(this);

                    $gallery.magnificPopup({
                        delegate: '.gallery__item',
                        type: 'image',

                        // Enable gallery
                        gallery: {
                            enabled: true
                        },

                        // Captions
                        image: {
                            titleSrc: function(item) {
                                return item.el.find('figcaption').html();
                            }
                        }
                    });
                });
            });
        </script>
            
        <!-- ======================================================================== -->

        <!-- ↓↓↓ ACTUAL INTEGRATION CODE ↓↓↓ -->
        <script src="magnific-popup.history.js"></script>

        <!-- YOU DON'T NEED THIS IF YOU CAN USE A SERVER-SIDE HANDLER FOR ?ITEM=... -->
        <script src="magnific-popup.open-item.js"></script>

        <!-- ======================================================================== -->

        <style>
            .gallery { display: table; }
            .gallery__item { float: left; }
            .mfp-title a { color: #ccc; }
            .mfp-title a:hover { color: #fff; }
        </style>

        <!--[if lt IE 9]>
            <script src="//cdnjs.cloudflare.com/ajax/libs/es5-shim/4.1.13/es5-shim.min.js"></script>
            <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
            <script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        <header>
            <h1><a href="http://dimsemenov.com/plugins/magnific-popup/">Magnific Popup</a> meets HTML5 History API (via <a href="https://github.com/browserstate/history.js">History.js</a>)</h1>
            
            <p><a href="https://github.com/EugeneDae/Magnific-Popup-History-API-Demo">GitHub repository</a>. This is just a demo, not a ready plugin, assembled by <a href="http://dae.me">Eugene / Dae</a> (<a href="mailto:dae@dae.me">dae@dae.me</a>).</p>
            
            <ol>
                <li>Browser’s “Back” button closes the popup and “Forward” reopens previously open image.</li>
                <li>Document title is updated dynamically with <code>alt</code> attribute of the open image.</li>
                <li>Each image has its own URL, which can be bookmarked and shared. You may also want to write a server-side handler of the <code>?item</code> GET-parameter to output <a href="https://developers.facebook.com/docs/sharing/best-practices#images">og:image meta tag</a> for Facebook and Twitter.</li>
            </ol>
        </header>
        
        <section class="gallery">
            <figure class="gallery__item" data-mfp-src="images/water-h800.jpg">
                <a href="?item=images/water-h800.jpg">
                    <img src="images/water-h200.jpg" alt="Water">
                </a>
                
                <figcaption>Photo by <a href="https://unsplash.com/jeremybishop">Jeremy Bishop</a>.</figcaption>
            </figure>
            
            <figure class="gallery__item" data-mfp-src="images/forest-h800.jpg">
                <a href="?item=images/forest-h800.jpg">
                    <img src="images/forest-h200.jpg" alt="Forest">
                </a>
                
                <figcaption>Photo by <a href="https://unsplash.com/ozarkdrones">Charles Yeager</a>.</figcaption>
            </figure>
            
            <figure class="gallery__item" data-mfp-src="images/bamboo-h800.jpg">
                <a href="?item=images/bamboo-h800.jpg">
                    <img src="images/bamboo-h200.jpg" alt="Bamboo">
                </a>
                
                <figcaption>Photo by <a href="https://unsplash.com/kazuend">kazuend</a>.</figcaption>
            </figure>
        </section>
        
        <section>            
            <h3>How to make Magnific Popup open <code>?item=something</code> at page load?</h3>
            <ul>
                <li><strong>Option 1</strong>. Server-side handler which outputs Javascript code. Example: <a href="open-item.php.txt">open-item.php</a>.</li>
                
                <li><strong>Option 2</strong>. Client-side handler.</li>
            </ul>
        </section>
        
        <footer>
            <small>The code of the demo is licensed under the terms of <a href="https://opensource.org/licenses/MIT">the MIT license</a>. Photos provided by <a href="https://unsplash.com/">Unsplash</a> by the courtesy of their respective authors.</small>
            
            <p>
                <a class="github-button" href="https://github.com/EugeneDae/Magnific-Popup-History-API-Demo" data-style="mega" data-count-href="/EugeneDae/Magnific-Popup-History-API-Demo/stargazers" data-count-api="/repos/EugeneDae/Magnific-Popup-History-API-Demo#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star EugeneDae/Magnific-Popup-History-API-Demo on GitHub">Star</a>
            
                <a class="github-button" href="https://github.com/EugeneDae/Magnific-Popup-History-API-Demo/issues" data-icon="octicon-issue-opened" data-style="mega" data-count-api="/repos/EugeneDae/Magnific-Popup-History-API-Demo#open_issues_count" data-count-aria-label="# issues on GitHub" aria-label="Issue EugeneDae/Magnific-Popup-History-API-Demo on GitHub">Issue</a>
            </p>
        </footer>
        
        <script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
    </body>
</html>